type ListedUser {
  userId: Int!
  email: String!
}

type NewUserAccount {
  userId: Int!
  email: String!
  capabilities: [String!]!
}

type CurrentSessionInfo {
  userId: Int!
  capabilities: [String!]!
}

type MyNoteEntry {
  noteId: Int!
  userId: Int!
  title: String!
  tags: [String!]!
  createdAt: String!
  updatedAt: String!
}

type MyNote {
  noteId: Int!
  userId: Int!
  title: String!
  tags: [String!]!
  content: String!
  createdAt: String!
  updatedAt: String!
}

type Query {
  # USER ACCOUNT MANAGEMENT
  ####################################################################
  accountListAllUsers: [ListedUser!]!
  accountGetUserCapabilities(userId: Int!): [String!]!
  accountSessionInfo: CurrentSessionInfo!
  listAllCapabilities: [String!]!

  # MY NOTES
  ####################################################################
  mynoteList: [MyNoteEntry!]!
  mynoteRead(noteId: Int!): MyNote!
}

type Mutation {
  # USER ACCOUNT MANAGEMENT
  ####################################################################
  accountGrantCapability(userId: Int!, capabilities: [String!]!): Boolean!
  accountRevokeCapability(userId: Int!, capabilities: [String!]!): Boolean!
  accountCreateUser(email: String!): NewUserAccount!
  accountDeleteUser(userId: Int!): Boolean!
  endSession: Boolean!

  # MY NOTES
  ####################################################################
  mynoteCreate(title: String!, tags: [String!]!, content: String!): MyNoteEntry!
  mynoteDelete(noteId: Int!): Boolean!
  mynoteEdit(
    noteId: Int!
    newTitle: String
    newTags: [String!]
    newContent: String
  ): Boolean!
}

schema {
  query: Query
  mutation: Mutation
}
